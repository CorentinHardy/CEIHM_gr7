<body>
  <div id="title"></div>
  <button id="buttonO">Send New Object</button>
  <button id="buttonM">Send New Map</button>
  <div id="history"></div>
</body>

<script src="/socket.io/socket.io.js"></script>

<script>
  var socket = io.connect();

  var addMsg = function (msg) {
    document.getElementById("history").innerHTML += "<p>" + msg + "</p>";
  };

  var type1 = {};
  type1.category = "home";
  type1.name = "blue_home";

  var position1 = {};
  position1.x = 1;
  position1.y = 1;
  position1.z = 1;

  var object1 = {};
  object1.id_object = 1;
  object1.type = type1;
  object1.position = position1;
  object1.angle = 90;
  object1.scale = 2;

  var type2 = {};
  type2.category = "home";
  type2.name = "red_home";

  var position2 = {};
  position2.x = 40;
  position2.y = -7;
  position2.z = -6;

  var object2 = {};
  object2.id_object = 2;
  object2.type = type2;
  object2.position = position2;
  object2.angle = 0;
  object2.scale = 1;

  var map = {};
  var object_list = [];
  object_list.push(object1);
  object_list.push(object2);
  map.objects = object_list;

  var sendObject = function(){
    socket.emit('object', object1);
    addMsg("Object sent");
  };
  document.getElementById("buttonO").onclick = sendObject;

  var sendMap = function(){
    socket.emit('map', map);
    addMsg("Map sent");
  };
  document.getElementById("buttonM").onclick = sendMap;


  socket.on('connect', function(){
    addMsg("Connected to the server");

    socket.emit('register', {type : "table"});
    addMsg("Registering as a table");

    document.getElementById("title").innerHTML = "<h4> Table " + socket.id + "</h4>";
  });

  socket.on('position', function(data){
    addMsg("Received new user position: " + JSON.stringify(data));
  });

</script>
